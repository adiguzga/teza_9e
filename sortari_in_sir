#include<iostream>
#include<math.h>
using namespace std;
void citire(int &n, int a[100])
{
    int i;
    cout<<"n="; cin>>n;
    for(i=0;i<n;i++)
        cin>>a[i];
}
int prime(int n)
{
    int d;
    if(n<2)
        return 0;
    else
    for(d=2;d<sqrt(n);d++)
        if(n%d==0)
            return 0;
    return 1;
}
int pali(int n)
{
    int in=0,cn=n;
    while(cn)
    {
        in=in*10+cn%10;
        cn=cn/10;
    }
    if(in==n)
        return 1;
    return 0;
}
void sortare_pali(int n, int a[100])
{
    int i,j,aux;
    for(i=0;i<n-1;i++)
        for(j=i+1;j<n;j++)
            if(pali(a[i])==1&&pali(a[j])==1&&a[i]>a[j])
            {
               aux=a[i];
               a[i]=a[j];
               a[j]=aux;
            }
}
void sortare_prim(int n, int a[100])
{
    int i,j,aux;
    for(i=0;i<n-1;i++)
        for(j=i+1;j<n;j++)
            if(prime(a[i])==1&&prime(a[j])==1&&a[i]>a[j])
            {
               aux=a[i];
               a[i]=a[j];
               a[j]=aux;
            }
}
void sortare_pozitii(int n, int a[100],int &p1,int &p2)
{
    int i,j,aux;
    cout<<"p1="; cin>>p1;
    cout<<"p2="; cin>>p2;
    for(i=0;i<n-1;i++)
        for(j=0;j<n;j++)
            if(i>=p1&&i<=p2&&j>=p1&&j<=p2&&a[i]<a[j])
            {
               aux=a[i];
               a[i]=a[j];
               a[j]=aux;
            }
}
void afisare(int n,int a[100])
{
    int i;
    for(i=0;i<n;i++)
        cout<<a[i]<<" ";
    cout<<endl;
}
int main ()
{
    int n,a[100],p1,p2;
    citire(n,a);
    afisare(n,a);
    sortare_pali(n,a);
    afisare(n,a);
    sortare_prim(n,a);
    afisare(n,a);
    sortare_pozitii(n,a,p1,p2);
    afisare(n,a);
	return 0;
}
